## Chapter 21. 코드 정리 시점

### 아예 안 한다면

진짜로 변경이 필요 없는 시스템이라면 "고장 나지 않으면 고치지도 말자"는 말이 합리적으로 통하겠죠.  

### 나중에 정리하기

하지만 제가 나중에 코드를 정리하겠다는 선택을 마치 정답처럼 여기는 이유는 지금 정리할 코드가 너무 많으니 언제 해도 상관없다는 논리입니다.  
저는 여러분이 정말 나중에 정리해도 무방하다고 말씀드리고 싶습니다.  

나중에 정리할 목적으로 엉망인 코드 목록을 만들 수도 있습니다.  

물론 먼저 코드 정리를 해 놓으면, 나중에 시스템 동작 변경을 더 쉽게 합니다.  
시스템에서 반드시 변경할 거라고 보장할 정도면, 그 보편적 영역을 정리하는 것만으로 향후 변경을 단순화하는 가치가 창출됩니다.  

한 가지는 지저분함 보유세를 줄이는 것입니다.  
하지만 그때까지는 새 API에 변경 사항이 발생하면, 거울처럼 이전 API에도 똑같이 반영해야 하는 불편함이 있죠.  

새로운 API 전환에 따라 영향을 받는 코드 모두를 변경하고 나면, 어떤 클래스들은 변경하기가 훨씬 쉬워집니다.  

코드 정리를 나중에 할 근거 중 다른 하나는 학습 도구로 활용하는 것을 들 수 있습니다.  
코드 정리는 설계한 세부 결과를 깨달을 수 있는 좋은 방법입니다.  

여러분이 행복을 느낄 때, 얼마든지 더 나은 프로그래머 될 수 있음을 간과하지 마세요.  

### 동작 변경 후에 코드 정리

같은 영역을 다시 변경하게 된다면, 동작 변경 후 코드 정리하는 일은 상당한 의미가 있습니다.  

나중에 가면 정리하는 일이 더 힘들 수도 있습니다.  
나중에는 맥락을 잊어버릴 수 있기 때문이죠.  
또는 다른 변경 건이 생겨 코드 정리를 하는 데 훼방을 놓을 수도 있습니다.  
나중에 코드를 정리할 때까지 기다리느라 비용이 너무 많이 증가할 가능성이 있다면, 지금 정리하는 것이 좋습니다.  

- 코드 정리하는 데 드는 시간이 동작 변경에 드는 시간과 거의 비슷할 때

### 코드 정리 후에 동작 변경

- 지저분한 상태 그대로 코드를 변경한다면, 일이 얼마나 더 어려운가?
- 코드 정리의 이점을 바로 얻을 수 있는가?
- 코드 정리에 드는 비용을 어떻게 보상받을 수 있을까요?
- 코드 정리에 대해 얼마나 확신하고 계신가요?

일반적으로 코드를 먼저 정리하는 것을 선호하지만, 정리 그 자체를 목적으로 삼지 않도록 경계해야 합니다.  

### 요약

다음 상황에는 코드 정리를 하지 마세요.  
- 앞으로 다시는 코드를 변경하지 않을 때
- 설계를 개선하더라도 배울 것이 없을 때

다음 상황에서는 나중으로 정리를 미루세요.  
- 정리할 코드 분량이 많은데, 보상이 바로 보이지 않을 때
- 코드 정리에 대한 보상이 잠재적일 때
- 작은 묶음으로 여러 번에 나눠서 코드 정리를 할 수 있을 때

다음 상황에서는 동작 변경 후에 정리하세요.
- 다음 코드 정리까지 기다릴수록 비용이 더 불어날 때
- 코드 정리를 하지 않으면 일을 끝냈다는 느낌이 들지 않을 때

다음 상황에서는 코드 정리 후에 동작 변경을 하세요.
- 코드 정리를 했을 때, 코드 이해가 쉬워지거나 동작 변경이 쉬워지는 즉각적인 효과를 얻을 수 있을 때
- 어떤 코드를 어떻게 정리해야 하는지 알고 있을 때

> 코드 정리로 얻는 이점 중에 '행복', '만족'과 같이 감정 관점은 신선했음  
>
> '나중에 정리하기'와 '동작 변경 후에 코드 정리'는 리뷰어 입장에서 동료에 대한 믿음이 중요한 듯   
