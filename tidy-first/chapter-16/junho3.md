## Chapter 16. 코드 정리 구분

코드 정리는 별도의 PR로 만들고, 가급적 PR당 몇 개의 코드 정리만 넣습니다.  

첫 단계에서는 그냥 변경 작업을 하는 즉, 변경을 구분하지 않은 상태에서 다수의 변경을 반영하기 시작합니다.  
예를 들어, if 문을 변경하는 도중에 이름이 잘못되었다는 것을 깨닫고 이름을 변경한 후 다시 if 문으로 돌아가는 경우를 생각해 봅시다.  
변경은 변경을 낳습니다.  

변경 대상 중에는 프로그램 동작 변경이 있습니다.  
반면, 어떤 변경은 프로그램 구조 변경입니다.  
이 시점(두번째 단계)에서는 아직 계획도 없고, 바뀌는 동작 변경과 구조 변경 사이에 어떤 흐름도 없습니다.  
서로 다른 두 가지가 함께 작용하고 있다고 이제 막 인식했을 뿐입니다.  

이 과정(세번째 단계)이 조금 지나면 공통 흐름을 알아채기 시작합니다.  
비슷한 코드끼리 정리하면 설명하는 도우미가 드러나고, 설명하는 도우미를 만들면 이어지는 동작 변경이 훨씬 쉬워집니다.  
다만 아직 큰 PR 한 개에 섞여 있을 뿐임을 주의합니다.  
쉽게 변경하던가 또는 변경하기 쉽게 만들던가, 둘 중 하나를 목표로 삼는 것이 좋습니다.  

그러니 우리는 변경 사항을 나누어 별도의 PR로 만들어야 합니다.  
순서가 있는 일련의 코드 정리는 PR 한 개로 만듭니다.  
코드 정리와 동작 변경 사이를 번갈아 가면서 전환할 때마다 새 PR을 열어야 합니다.  

크고 포괄적인 PR로 만들면 전체 그림을 보여주지만, 검토하는 입장에서는 유용한 피드백을 제공하기에는 너무 큰 덩어리일 수 있습니다.  
반대로 아주 작은 PR은 소소한 피드백을 유도할 수 있지만, 잡초처럼 무시될 우려가 있습니다.  

대체로 코드를 느리게 검토한다면, 더 큰 PR을 만드는 결과를 초래하여, 향후 검토를 더욱 느리게 만듭니다.  

> PR 검토 사이클 속도를 올리려면 어떻게 하면 좋을까?  
> 
> 책 내용처럼 진행하려면 준 실시간으로 PR 검토가 이루어져야 한다고 봄  
> 준 실시간으로 돌아가기 위해서는 모든 구성원들이 업무의 0순위는 PR 검토이고, 따라서 PR 검토가 중요한 이유를 이해해야 함  
> PR 검토가 0순위에서 1순위로 되는 순간, 업무 우선 순위에 밀려 지연되는 듯  
> 개인적으로 PR 검토는 자발적이어야하며, PR 홍보를 좋아하진 않음  
> 왜냐하면 PR을 홍보하면, 검토자가 LGTM 승인을 해버릴 것 같은 느낌  
>
> 최근에 'PR 검토(승인)을 왜 주저하는가?'에 대한 논의를 했었음  
> 1. 코드 뒤에 숨겨진 업무 맥락을 몰라서
> 2. 다른 업무로 인해 PR 검토 시간 부족
> 3. 코틀린 코드를 잘 몰라서 (개발 이해도, 지식 부족)
> 4. 완벽한 검토를 해야한다는 생각 때문에 전체 맥락을 확인하느라 검토하는데 시간을 너무 많이 사용
> 
> 이에 대한 해결책으로
> 1. 업무 맥락을 모르면, 문법이나 컨벤션만 확인하기  
> 2. 업무를 시작하기 전에 일정 시간은 무조건 PR 검토하기  
> 3. 지식을 올리려면 팀 차원에서 학습해야하나 부담스러운건 사실 (보류)  
> 4. 1번 해결책으로 대체. 업무 맥락을 아는 메인터너가 책임져야 하며, 반드시 메인터너의 승인이 있어야 함     
>
> 보통 하나의 PR에 B(동작) 커밋을 하고 S(구조) 커밋으로 진행하는 듯  
> 변경이 있기 때문에 구조 변경이 발생한다고 생각해서 B와 S를 분리해서 작업하는건 불가능하고, 검토자가 이해를 못 할 가능성이 높다고 생각함  
> "왜 구조가 변경되는 것인지?" 그리고 "변경할 구조가 올바른 방향인지?" 알기 어려움  
> S가 매우 크다고 판단될 경우(신규 결제수단 추가), S PR 완료 후 B PR 진행
> 
> Git lable을 사용해서 feature와 refactoring으로 PR 구분  
